---
host_name: "spare03.node.rotko.net"
host_timezone: "Europe/Helsinki"
ansible_host: "65.21.132.8"
role: "proxmox"

default_need_portforwarding: True

default_gw_device: "enp41s0"

kernel_modules:
  - zfs

default_storage: "zfs_storage"

lxc_nodes:
  - host: "ethereum01"
    proxmox_config:
      vmid: "102"
      hostname: "{{ hostvars['ethereum01']['host_name'] }}"
      ostemplate: 'local:vztmpl/{{ default_container_template }}'
      netif: "{{ hostvars['ethereum01']['netif'] }}"
      cores: 4
      memory: 65568
      swap: 32768
      password: M4RG4RETth4tcherIS110%hot
      disk: "{{ default_storage }}:20"
      mounts: '{"mp0":"{{ default_storage }}:3000,mp={{ hostvars["ethereum01"]["erigon_storage_path"] }}"}'
      onboot: True
      unprivileged: True
      validate_certs: False
      description: "Erigon ethereum node: {{ hostvars['ethereum01']['host_name'] }}"
      state: present
      features:
        - nesting=1
    port_forwards:
      - from_port: "{{ hostvars['ethereum01']['ansible_port'] }}"
        to_host: "{{ hostvars['ethereum01']['container_ip'] }}:22"
        protocol: "tcp"
      - from_port: "{{ hostvars['ethereum01']['erigon_eth_p2p_port'] }}"
        to_host: "{{ hostvars['ethereum01']['container_ip'] }}:{{ hostvars['ethereum01']['erigon_eth_p2p_port'] }}"
        protocol: "tcp"
      - from_port: "{{ hostvars['ethereum01']['erigon_eth_p2p_port'] }}"
        to_host: "{{ hostvars['ethereum01']['container_ip'] }}:{{ hostvars['ethereum01']['erigon_eth_p2p_port'] }}"
        protocol: "udp"
      - from_port: "{{ hostvars['ethereum01']['erigon_eth_bt_port'] }}"
        to_host: "{{ hostvars['ethereum01']['container_ip'] }}:{{ hostvars['ethereum01']['erigon_eth_bt_port'] }}"
        protocol: "tcp"
      - from_port: "{{ hostvars['ethereum01']['erigon_eth_bt_port'] }}"
        to_host: "{{ hostvars['ethereum01']['container_ip'] }}:{{ hostvars['ethereum01']['erigon_eth_bt_port'] }}"
        protocol: "udp"
      - from_port: "{{ hostvars['ethereum01']['erigon_eth_http_port'] }}"
        to_host: "{{ hostvars['ethereum01']['container_ip'] }}:{{ hostvars['ethereum01']['erigon_eth_http_port'] }}"
        protocol: "tcp"
      - from_port: "{{ hostvars['ethereum01']['erigon_eth_p2p2_port'] }}"
        to_host: "{{ hostvars['ethereum01']['container_ip'] }}:{{ hostvars['ethereum01']['erigon_eth_p2p2_port'] }}"
        protocol: "tcp"
      - from_port: "{{ hostvars['ethereum01']['erigon_eth_p2p2_port'] }}"
        to_host: "{{ hostvars['ethereum01']['container_ip'] }}:{{ hostvars['ethereum01']['erigon_eth_p2p2_port'] }}"
        protocol: "udp"
      - from_port: "{{ hostvars['ethereum01']['erigon_eth_sentry_port'] }}"
        to_host: "{{ hostvars['ethereum01']['container_ip'] }}:{{ hostvars['ethereum01']['erigon_eth_sentry_port'] }}"
        protocol: "udp"
      - from_port: "{{ hostvars['ethereum01']['erigon_eth_sentry2_port'] }}"
        to_host: "{{ hostvars['ethereum01']['container_ip'] }}:{{ hostvars['ethereum01']['erigon_eth_sentry2_port'] }}"
        protocol: "tcp"
  - host: "dfk04"
    proxmox_config:
      vmid: "904"
      hostname: "{{ hostvars['dfk04']['host_name'] }}"
      ostemplate: 'local:vztmpl/{{ default_container_template }}'
      netif: "{{ hostvars['dfk04']['netif'] }}"
      cores: 4
      memory: 16384
      swap: 16384
      password: M4RG4RETth4tcherIS110%hot
      disk: "{{ default_storage }}:20"
      mounts: '{"mp0":"{{ default_storage }}:3500,mp={{ hostvars["dfk04"]["defikingdom_storage_path"] }}"}'
      onboot: True
      unprivileged: True
      validate_certs: False
      description: "DeFi Kingdoms: {{ hostvars['dfk04']['host_name'] }}"
      state: present
      features:
        - nesting=1
    port_forwards:
      - from_port: "{{ hostvars['dfk04']['ansible_port'] }}"
        to_host: "{{ hostvars['dfk04']['container_ip'] }}:22"
        protocol: "tcp"
      - from_port: "{{ hostvars['dfk04']['defikingdom_http_port'] }}"
        to_host: "{{ hostvars['dfk04']['container_ip'] }}:{{ hostvars['dfk04']['defikingdom_http_port'] }}"
        protocol: "tcp"
      - from_port: "{{ hostvars['dfk04']['defikingdom_staking_port'] }}"
        to_host: "{{ hostvars['dfk04']['container_ip'] }}:{{ hostvars['dfk04']['defikingdom_staking_port'] }}"
        protocol: "tcp"
      - from_port: "{{ hostvars['dfk04']['defikingdom_staking_port'] }}"
        to_host: "{{ hostvars['dfk04']['container_ip'] }}:{{ hostvars['dfk04']['defikingdom_staking_port'] }}"
        protocol: "udp"
  - host: "klaytn01"
    proxmox_config:
      vmid: "901"
      hostname: "{{ hostvars['klaytn01']['host_name'] }}"
      ostemplate: 'local:vztmpl/{{ default_container_template }}'
      netif: "{{ hostvars['klaytn01']['netif'] }}"
      cores: 4
      memory: 16384
      swap: 16384
      password: M4RG4RETth4tcherIS110%hot
      disk: "{{ default_storage }}:20"
      mounts: '{"mp0":"{{ default_storage }}:4000,mp={{ hostvars["klaytn01"]["klaytn_storage_path"] }}"}'
      onboot: True
      unprivileged: True
      validate_certs: False
      description: "klaytn node: {{ hostvars['klaytn01']['host_name'] }}"
      state: present
      features:
        - nesting=1
    port_forwards:
      - from_port: "{{ hostvars['klaytn01']['ansible_port'] }}"
        to_host: "{{ hostvars['klaytn01']['container_ip'] }}:22"
        protocol: "tcp"
      - from_port: "{{ hostvars['klaytn01']['klaytn_port'] }}"
        to_host: "{{ hostvars['klaytn01']['container_ip'] }}:{{ hostvars['klaytn01']['klaytn_port'] }}"
        protocol: "tcp"
      - from_port: "{{ hostvars['klaytn01']['klaytn_port'] }}"
        to_host: "{{ hostvars['klaytn01']['container_ip'] }}:{{ hostvars['klaytn01']['klaytn_port'] }}"
        protocol: "udp"
      - from_port: "{{ hostvars['klaytn01']['klaytn_sub_port'] }}"
        to_host: "{{ hostvars['klaytn01']['container_ip'] }}:{{ hostvars['klaytn01']['klaytn_sub_port'] }}"
        protocol: "tcp"
      - from_port: "{{ hostvars['klaytn01']['klaytn_sub_port'] }}"
        to_host: "{{ hostvars['klaytn01']['container_ip'] }}:{{ hostvars['klaytn01']['klaytn_sub_port'] }}"
        protocol: "udp"
      - from_port: "{{ hostvars['klaytn01']['klaytn_ws_port'] }}"
        to_host: "{{ hostvars['klaytn01']['container_ip'] }}:{{ hostvars['klaytn01']['klaytn_ws_port'] }}"
        protocol: "tcp"
      - from_port: "{{ hostvars['klaytn01']['klaytn_rpc_port'] }}"
        to_host: "{{ hostvars['klaytn01']['container_ip'] }}:{{ hostvars['klaytn01']['klaytn_rpc_port'] }}"
        protocol: "tcp"
      - from_port: "{{ hostvars['klaytn01']['klaytn_bridge_port'] }}"
        to_host: "{{ hostvars['klaytn01']['container_ip'] }}:{{ hostvars['klaytn01']['klaytn_bridge_port'] }}"
        protocol: "tcp"
...
