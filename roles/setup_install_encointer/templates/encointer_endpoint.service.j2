[Unit]
Description="{{ host_name.split('.')[0] }} endpoint - Encointer service"
After=network-online.target
Wants=network-online.target

[Service]
User={{ encointer_user }}
Group={{ encointer_group }}
ExecStart={{ encointer_base }}/encointer \
  --name "{{ default_telemetry_name }}" \
  --chain {{ encointer_network }} \
  --base-path {{ encointer_base }} \
  --state-pruning archive \
  --sync full \
  --listen-addr /ip6/::/tcp/{{ encointer_p2p_port }} \
  --listen-addr /ip6/::/tcp/{{ encointer_p2p_port_ws }}/ws \
  --listen-addr /ip4/0.0.0.0/tcp/{{ encointer_p2p_port }} \
  --listen-addr /ip4/0.0.0.0/tcp/{{ encointer_p2p_port_ws }}/ws \
  --public-addr /dns/{{ default_public_dns }}/tcp/{{ encointer_p2p_port }} \
  --public-addr /dns/{{ default_public_dns }}/tcp/{{ encointer_p2p_port_ws }}/ws \
  --public-addr /dns/{{ default_public_dns }}/tcp/{{ encointer_p2p_port_wss }}/wss \
  --rpc-port {{ default_rpc_port }} \
  --prometheus-port {{ encointer_prom_port }} \
  --relay-chain-rpc-urls {{ default_relay_rpc }} {{ default_relay_rpc_fallback }} \
  --wasm-execution Compiled \
  --execution native-else-wasm \
  --no-hardware-benchmarks \
  --rpc-external \
  --rpc-methods safe \
  --rpc-cors all \
  --allow-private-ipv4

Restart=always
RestartSec=120

[Install]
WantedBy=multi-user.target
